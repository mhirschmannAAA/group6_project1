
<!DOCTYPE html>
<html>
  <head>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="js/mapwork.js" type="text/javascript"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Group 6 - Project 1</title>
   
    <style>

    body{
      background-color:#C0C0C0;
    }

    #mainbody{
       
       background-image: url("images/atlanta.jpg");
       background-size: cover;
       display: block;
       min-height: 700px;
       width: 100%;
    }

    #select {
      width: 300px;
      margin-top: 300px;
      margin-left: 10px;
    }

    #nav-mobile {
    margin-left: 50px;
    }

   #logo {
      margin-right: 50px;
    }

    #header {
      text-align: center;
      font-family:'Times New Roman', Times, serif;
      line-height: 50px;
      font-size: 50px;
      padding-top: 40px;
      color: aliceblue;
    }

    p {
    text-align: center;
    font-size: 25px;
     color: aliceblue;
    }

    #displayTemp {
    text-align:right;
    font-size: 15px;
    color: aliceblue;
    padding-right: 40px;
    padding-top: 20px;
    font-weight: bold;
    }

    #label {
        color: white;
        font-size: 25px;
    }

    #Destination {
        color: white;
        font-size: 25px;
        padding-top: 15px;
    }

    .page-footer{
        background-color: darkgrey;
    }

    .map {
        width: 425px;
        height: 400px;
        /* float: right; */
        overflow: hidden;   
    }



    #display {

        background-image: url("images/MARTA_TRain.jpg");
        background-size: cover;
        display: block;
        width: 90%;
        min-height: 700px;
        margin-left: -220px;
    }

    .view{
        background-color: black;
        opacity: 0.8;
        filter: alpha(opacity=80); /* For IE8 and earlier */
        color: orange;
        margin-left: 50px;
        margin-top: 20px;
        width: 400px;
        line-height: 25px;
        font-size: 20px;
    }
 
    </style>
 
  </head>

  <body>

      <!--Link to Jquery -->
      <script
      src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="crossorigin="anonymous"></script>
     
      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

    

    <h>
        <nav>
            <div class="nav-wrapper #37474f blue-grey darken-3">
                <a href="#" class="brand-logo right">C3</a>
                <ul id="nav-mobile" class="left hide-on-med-and-down">
                <li><a href="sass.html">Schedule</a></li>
                <li><a href="badges.html">City Information</a></li>
                <li><a href="collapsible.html">Contact Us</a></li>
                </ul>
            </div>
        </nav>
    </h>

<div class="container">
     
    <div class="row" id="mainbody">
        <div class="row" id="displayTemp">
            <span id="tempFahr"></span>
        </div>

        <header class="row" id="header">
            <h> Welcome to ATLANTA </h>
            <p> We Connect You in Seconds </p>
        </header>

    <div class="row" id="map">
        <div class="col 16 offset-8 s8"></div>
            <button id="goMap">View Map</button>
        
        
    </div>

    <div class="row" id="select">
        <div class="input-field">
            <input type="text" id="Destination"> 
            <label class="active" for="name" id="label">Enter Your Destination</label>
            <button class="btn waves-effect waves-light" id="button" type="submit" name="action">GO
                <i class="material-icons right">send</i>          
    
        </div>
    </div>

    <div class="row" id="mapDiv">
    <!-- This is the Map location -->
           
    </div>
    
</div>

<div class="row">
<div class="col s9" id="display"> </div>

<div class="col s3" id="displayInfo">

        <div class="row" id="displayTemp">
                <span id="tempFahr"></span>
            </div>
        <h1 id="station-input"></h1>
        <div class="view" id="startpoint-display"></div>
        <div class="view" id="line-display"></div>
        <div class="view" id="time-display"></div>
        <div class="view" id="direction-display"></div>
        <div class="view" id="destination-display"></div>

</div>

</div>

</div>

   <footer class="page-footer">
        <div class="container">
          <div class="row">
            <div class="col l6 s12">
              <h5 class="white-text">Footer Content</h5>
              <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
            </div>
            <div class="col l4 offset-l2 s12">
              <h5 class="white-text">Links</h5>
              <ul>
                <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="footer-copyright" id="footer">
          <div class="container" >
          Â© 2014 Copyright Text
          <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
          </div>
        </div>
      </footer>

    </footer>

    <script>
    
    // Create map in an iframe when button is clicked.
    $("button").on('click', function(e) {
        e.preventDefault();

        $('<iframe />', {
            name: 'frame',
            id: 'goMap',
            src: 'gmap.html',
            align: "right",
            height: "400px",
            width: "405px",
            scrolling: "no",
            frameborder: "0"
        }).appendTo('#map');
    });  

    // variables //

    var select = $("#select");
    var mainPage = $("#mainbody");
    var newDiv = $("<div>")
    var showMap = $("<button>");
    showMap.addClass("map");
    showMap.text("View Map");


    function donotShow() {
    $("#display").hide();
    };

    $(document).ready(function () {
    donotShow(); 
    }); 

     
    $("#button").on("click", function(event) {
    event.preventDefault();
    select.hide();
    mainPage.hide();
    $("#display").show();

    var station = $("#Destination").val().toLowerCase();
           
    var queryURL = "http://developer.itsmarta.com/RealtimeTrain/RestServiceNextTrain/GetRealtimeArrivals?apikey=56a19e24260049d499ff8ea90f306b0d";
    console.log(station)
    var newArray = [];
    var settings = {
        "async": true,
        "url": "http://developer.itsmarta.com/RealtimeTrain/RestServiceNextTrain/GetRealtimeArrivals?apikey=56a19e24260049d499ff8ea90f306b0d",
        "method": "GET"
        }
        $.ajax(settings).done(function (response) {
          console.log(response);
          for (var i = 0; i < response.length; i++) {
            if (response[i]["STATION"].toLowerCase() !== station) {
              newArray.push(response[i]);
              $("#startpoint-display").text("Destination:    " + station);
              $("#line-display").text("LINE: " + response[i]["LINE"]);
              $("#time-display").text("ARRIVAL TIME: " + response[i]["NEXT_ARR"]);
              $("#direction-display").text("BOUND: " + response[i]["DIRECTION"]);
            //   $("#destination-display").text("Destination: " + response[i]["DESTINATION"]);
            }
          }
        });
      });
     

  var APIKey = "79d67786e1c3ff629c3696cad8d187ed";
  var queryURL2 = "https://api.openweathermap.org/data/2.5/weather?q=atlanta&appid=" + APIKey;

  $.ajax({
      url: queryURL2,
      method: "GET"
    }).then(function(response) {

      // Create CODE HERE to Log the queryURL
      console.log(queryURL2);
      // Create CODE HERE to log the resulting object
      console.log(response);
      // Create CODE HERE to transfer content to HTML
      $(".city").text(response.name);
      $(".wind").text(response.wind.speed);
      $(".humidity").text(response.main.humidity);

      // Create CODE HERE to calculate the temperature (converted from Kelvin)
      console.log(response.main.temp);
      var temp = response.main.temp;
      var fahr = (temp-273.15)*1.8 + 32
      console.log(fahr);
      $("#tempFahr").text("Current Temp " + Math.round(fahr) + " 'F");

    });

    var select = $("#select");
    var newDiv = $("<div>")
    var initMap = $("<button>");
    initMap.addClass("map");
    initMap.text("View Map");

    </script>

  </body>
</html>
